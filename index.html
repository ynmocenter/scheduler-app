<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>نظام مواعيد المركز</title>
  <style>
    /* مبسّط للتنسيق */
    body { font-family: 'Tajawal', sans-serif; background: #f9f1e5; color:#333; margin:0 }
    header { background:#142445; color:#fff; display:flex; align-items:center; padding:10px }
    header img { height:50px; margin-left:15px }
    header h1 { font-size:1.5rem; }
    nav { display:flex; background:#fff; border-bottom:2px solid #8bd5c8 }
    nav button { flex:1; padding:10px; border:none; background:none; cursor:pointer; color:#142445; }
    nav button.active, nav button:hover { background:#8bd5c8 }
    section { display:none; padding:20px }
    section.active { display:block }
    table { width:100%; border-collapse:collapse; margin-top:10px }
    th, td { border:1px solid #ccc; padding:8px; text-align:center }
    th { background:#8bd5c8 }
    button { padding:6px 12px; margin:5px; cursor:pointer }
  </style>
</head>
<body>

  <header>
    <img src="assets/logo.png" alt="شعار المركز" />
    <h1>نظام مواعيد المركز</h1>
  </header>

  <nav>
    <button data-tab="children" class="active">الأطفال</button>
    <button data-tab="specialists">الأخصائيون</button>
    <button data-tab="appointments">المواعيد</button>
    <button data-tab="reports">التقارير</button>
  </nav>

  <!-- 1. إدارة الأطفال -->
  <section id="children" class="active">
    <h2>١. إدارة الأطفال</h2>
    <button onclick="openChildModal()">إضافة طفل</button>
    <table id="tblChildren">
      <thead>
        <tr>
          <th>#</th><th>اسم</th><th>بكيج</th><th>بدء</th><th>كلي</th><th>متبقي</th><th>حالة</th><th>إجراءات</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <!-- 2. إدارة الأخصائيين -->
  <section id="specialists">
    <h2>٢. الأخصائيون</h2>
    <button onclick="openSpecModal()">إضافة أخصائي</button>
    <table id="tblSpecs">
      <thead>
        <tr>
          <th>#</th><th>اسم</th><th>بريد</th><th>قسم</th><th>أيام</th><th>إجراءات</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <!-- 3. حجز المواعيد -->
  <section id="appointments">
    <h2>٣. المواعيد</h2>
    <button onclick="autoScheduleAll()">جدولة تلقائية</button>
    <table id="tblAppts">
      <thead>
        <tr>
          <th>#</th><th>طفل</th><th>تاريخ</th><th>وقت</th><th>قسم</th><th>أخصائي</th><th>نوع</th><th>حالة</th><th>إجراءات</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>

  <!-- 4. التقارير -->
  <section id="reports">
    <h2>٤. التقارير</h2>
    <div id="endingReport"></div>
    <div id="pausedReport"></div>
  </section>

  <!-- نوافذ المودال -->
  <div id="modal" style="display:none;position:fixed;top:0;left:0;right:0;bottom:0;
       background:rgba(0,0,0,0.4);align-items:center;justify-content:center;display:flex">
    <div style="background:#fff;padding:20px;border-radius:8px;min-width:300px">
      <h3 id="modalTitle"></h3>
      <form id="modalForm"></form>
      <div style="margin-top:10px;text-align:left">
        <button onclick="saveModal(event)">حفظ</button>
        <button onclick="closeModal(event)">إلغاء</button>
      </div>
    </div>
  </div>

  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <script src="app.js"></script>
</body>
</html>
