<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>نظام مواعيد المركز</title>
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet"/>
  <style>
    body { font-family:'Tajawal',sans-serif; background:#F7F9FA; color:#1F2937; margin:0 }
    :root { --primary:#0B2545; --accent:#64C8B0; --border:#E5E7EB; }
    .btn-tab { @apply text-primary py-2 px-4 hover:bg-accent/20; }
    .btn-tab-active { @apply border-b-2 border-accent text-accent; }
    .btn-primary { @apply bg-accent text-white px-4 py-2 rounded shadow; }
    .card { @apply bg-white rounded shadow p-4; }
    .styled-table th { @apply bg-accent text-white; }
    .styled-table th, .styled-table td { @apply border border-border; }
    .toast { @apply fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-4 py-2 rounded; }
    .toast-info { @apply bg-blue-500; }
  </style>
</head>
<body>

  <!-- HEADER -->
  <header class="bg-primary h-14 flex items-center justify-center relative shadow">
    <img src="assets/logo.png" class="absolute left-4 h-8 object-contain" alt="شعار المركز">
    <h1 class="text-white text-xl font-bold">نظام مواعيد المركز</h1>
  </header>

  <main class="container mx-auto px-4 py-6 space-y-8">

    <div id="toast-container" class="fixed top-4 left-1/2 transform -translate-x-1/2 z-50"></div>

    <!-- TABS -->
    <nav class="flex gap-6 border-b-2 border-border">
      <button data-tab="children" class="btn-tab btn-tab-active">الأطفال</button>
      <button data-tab="specialists" class="btn-tab">الأخصائيون</button>
      <button data-tab="appointments" class="btn-tab">المواعيد</button>
      <button data-tab="reports" class="btn-tab">التقارير</button>
    </nav>

    <!-- 1) إدارة الأطفال -->
    <section id="children">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-lg font-semibold">١. إدارة الأطفال</h2>
        <button id="btn-add-child" class="btn-primary">إضافة طفل</button>
      </div>
      <div class="overflow-x-auto card">
        <table class="styled-table w-full">
          <thead>
            <tr>
              <th>#</th><th>اسم الطفل</th><th>البكيج</th><th>تاريخ بدء</th>
              <th>الكلي</th><th>المتبقي</th><th>الحالة</th><th>إجراءات</th>
            </tr>
          </thead>
          <tbody id="table-children-body"></tbody>
        </table>
      </div>
    </section>

    <!-- 2) إدارة الأخصائيين -->
    <section id="specialists" class="hidden">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-lg font-semibold">٢. إدارة الأخصائيين</h2>
        <button id="btn-add-specialist" class="btn-primary">إضافة أخصائي</button>
      </div>
      <div class="overflow-x-auto card">
        <table class="styled-table w-full">
          <thead>
            <tr>
              <th>#</th><th>الاسم</th><th>البريد</th><th>القسم</th><th>أيام العمل</th><th>أوقات الجلسات</th><th>إجراءات</th>
            </tr>
          </thead>
          <tbody id="table-specialists-body"></tbody>
        </table>
      </div>
    </section>

    <!-- 3) حجز المواعيد -->
    <section id="appointments" class="hidden">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-lg font-semibold">٣. حجز المواعيد</h2>
        <div class="space-x-2">
          <button id="btn-add-appointment" class="btn-primary">إضافة موعد</button>
          <button onclick="autoScheduleAll()" class="btn-primary">جدولة تلقائية</button>
        </div>
      </div>
      <div class="overflow-x-auto card">
        <table class="styled-table w-full">
          <thead>
            <tr>
              <th>#</th><th>طفل</th><th>التاريخ</th><th>الوقت</th><th>القسم</th>
              <th>الأخصائي</th><th>النوع</th><th>الحالة</th><th>إجراءات</th>
            </tr>
          </thead>
          <tbody id="table-appointments-body"></tbody>
        </table>
      </div>
    </section>

    <!-- 4) التقارير -->
    <section id="reports" class="hidden">
      <h2 class="text-lg font-semibold mb-4">٤. التقارير</h2>
      <div class="card space-y-6">
        <div>
          <h3 class="font-medium">⏳ اشتراكات على وشك الانتهاء:</h3>
          <ul id="report-expiring-children" class="list-disc list-inside text-sm"></ul>
        </div>
        <div>
          <h3 class="font-medium">⏸️ أطفال متوقفون مؤقتًا:</h3>
          <ul id="report-paused-children" class="list-disc list-inside text-sm"></ul>
        </div>
      </div>
    </section>

  </main>

  <script type="module" src="firebase-config.js"></script>
  <script type="module" src="app.js"></script>
</body>
</html>
